# Cassification of Correlation Patterns


##1. Description
Program to evaluate the correlation patterns of a three-component ultracold system consisting of two bosonic and one fermionic species (A, B, C) interacting with gAB, gAC, gBC, gBB, gCC that are trapped in a harmonic oscillator potential. The data is generated by varying the interaction parameters gAB, gAC, gBC, gBB, gCC, where each parameter-combination realizes one scenario.
In advance of this analysis, we have generated the data using the ML-MCTDHX method [1-3]. and have calculated each scenario as a different job on a computing cluster.

For each scenario calculate the two-body correlation function between species B and C.
The correlation functions describe the correlation between two particles resolved on a spatial grid with 400 grid points. Thus, the size of each correlation function is 400 x 400. The total number of parameter configuration is approximately 18000.


<small>
[1] L. Cao, V. Bolsinger, S. I. Mistakidis, G. M. Koutentakis, S.
Krönke, J. M. Schurer, and P. Schmelcher, *A unified ab initio
approach to the correlated quantum dynamics of ultracold
fermionic and bosonic mixtures*, J. Chem. Phys. **147**, 044106
(2017).

<small>
[2] L. Cao, S. Krönke, O. Vendrell, and P. Schmelcher, *The multi-
layer multi-configuration time-dependent Hartree method for
bosons: Theory, implementation, and applications*, J. Chem.
Phys. **139**, 134103 (2013).

<small>
[3] S. Krönke, L. Cao, O. Vendrell, and P. Schmelcher, *Non-
equilibrium quantum dynamics of ultra-cold atomic mix-
tures: The multi-layer multi-configuration time-dependent
Hartree method for bosons*, New J. Phys. **15**, 063018
(2013).



##2. Aim:

- We are interested in training a model that can reproduce the expected correlation pattern when passing interaction parameters which have not been probed.
- Find features of correlation patterns and check whether they form clusters.


##3. Starting point

- For each parameter configuration we have access to a psi-file which represents the many-body wave function and contains all information of the many-body problem.

##4 Data gathering and preprocessing

###4.1 Create correlation functions

Script: **gather_ext_data.py**

- Calculate from the psi-file the two-body correlation between species B and C. By employing an external analysis-tool.

- To reduce required storage: correlation functions/matrices are trimmed. The values at the edges are close to zero so we can cut them. **New image size: 200x200.**

- Store each correlation functions as a npz-file in a data-folder together with the parameters.py-file. Store as batches, i.e., folders with up to 1000 subfolders.


Script: **create_parameter_DataFrame.ipynb**

- Iterate through folders.

- Read in parameters.py file and extract values for interaction parameters gBB, gCC, gAB, gAC, gBC.

- Culminate the interaction parameters as well as the path of the corresponding folders in a DataFrame.

- Store DataFrame as pickle in **df_parameter.p**.


##4.2 Reduce data and perform PCA

Script: **create_corr_mat_DataFrame.ipynb**

- Iterate through data using paths from **df_parameter.p**.

- Load correlation functions and create a matrix, where each row corresponds to a flattened correlation-matrix. Since the matrices are symmetric, flatten only the upper triangular of the matrices, i.e.,

<table>
  <tr>
    <td>
      <table border="1" cellpadding="5" cellspacing="0" style="border-collapse: collapse; text-align: center;">
        <tr><td>a</td><td>b</td><td>c</td></tr>
        <tr><td>b</td><td>d</td><td>e</td></tr>
        <tr><td>c</td><td>e</td><td>f</td></tr>
      </table>
    </td>
    <td style="font-size: 24px; padding-left: 20px; vertical-align: middle;">→</td>
    <td style="font-family: monospace; padding-left: 20px; vertical-align: middle;">[a, b, c, d, e, f]</td>
  </tr>
</table>

- Store matrices with up to 1000 flattened correlation functions as DataFrames.

- Reload and merge to a large DataFrame: size **18014 x 20100**

- Make principle components analysis. Check how many components are needed: Result:

<table border="1" cellpadding="5" cellspacing="0">
  <tr>
    <th>n_comp</th>
    <th>explained variance</th>
  </tr>
  <tr>
    <td>2</td>
    <td>0.8722</td>
  </tr>
  <tr>
    <td>5</td>
    <td>0.9885</td>
  </tr>
  <tr>
    <td>10</td>
    <td>0.9985</td>
  </tr>
  <tr>
    <td>15</td>
    <td>0.9996</td>
  </tr>
</table>

- We continue with **n_comp=10**, compare the correlation functions:

- Create a figures where original the correlation matrix is compared to the reduced and back-transformed correlation plot. For example see *figures/corr_ind8782_pca_n_2.pdf* and *figures/corr_ind8782_pca_n_10.pdf*

- Combine df_parameter.p and the principle components and create the final DataFrame **df_main.p** with size **18014x16**.


##5 Find clusters






